.editor-container {
    min-height: 400px;
    padding: 80px 0;
    /* Remove horizontal padding to allow full-width elements naturally */
    outline: none;
    overflow-x: hidden;
    overflow-y: auto;
    position: relative;
    /* Allow template designer to set the background and color */
    /* Removed color: inherit & background-color to allow proxied CSS variables to win */
}

/* Generic Fixed/Navigation Support (Unlocking non-W3 frameworks) */
/* Generic Fixed/Navigation Support (Unlocking non-W3 frameworks) */
.editor-container nav,
.editor-container .w3-top,
.editor-container .w3-bar,
.editor-container [style*="position: fixed"],
.editor-container [style*="position:fixed"] {
    position: sticky !important;
    top: 0 !important;
    left: 0 !important;
    width: 100% !important;
    margin: 0 !important;
    margin-top: -80px !important;
    /* Counteract top padding only */
    z-index: 1000 !important;
    display: flex !important;
    justify-content: space-between;
    align-items: center;
    box-sizing: border-box !important;
}

/* Ensure the background of the navbar is visible */
.editor-container nav {
    background: inherit;
}

/* Force Hidden/Animated Content to stay visible in Editor */
.editor-container .reveal,
.editor-container [style*="opacity: 0"],
.editor-container [style*="display: none"] {
    opacity: 1 !important;
    transform: none !important;
    visibility: visible !important;
    display: block !important;
    /* Force block if it's a structural hidden element */
}

/* Fix for Hero sections with vh heights */
.editor-container .hero,
.editor-container [style*="height: 100vh"] {
    min-height: 600px !important;
    height: auto !important;
}

/* Disable distracting animations during editing but keep the final look */
.editor-container .hero-image,
.editor-container * {
    animation-iteration-count: 0 !important;
    /* Stop movement */
    animation-play-state: paused !important;
}

/* Glassmorphism Restore: Ensure backdrop filters work inside the scrollable area */
.editor-container .glass-nav {
    backdrop-filter: blur(10px) !important;
    -webkit-backdrop-filter: blur(10px) !important;
}

/* Restore Horizontal Layout for Navbar Elements */
.editor-container .w3-bar .w3-bar-item {
    float: left !important;
    width: auto !important;
    padding: 8px 16px !important;
    vertical-align: middle !important;
}

.editor-container .w3-bar .w3-right {
    float: right !important;
}

/* Clearfix for the bar */
.editor-container .w3-bar::after {
    content: "";
    display: table;
    clear: both;
}

/* Fidelity: Ensure navbar buttons don't have text-decoration from editor */
.editor-container .w3-bar-item {
    text-decoration: none !important;
    color: inherit !important;
}

/* Remove default paragraph margins at the top to keep navbar flush */
.editor-container>p:first-child,
.editor-container>div:first-child {
    margin-top: 0 !important;
}

/* Same-to-Same Fix: Force 'fixed' elements from templates to stay in the editor */
.editor-container .w3-top,
.editor-container .w3-bottom,
.editor-container [style*="position: fixed"],
.editor-container [style*="position:fixed"] {
    position: sticky !important;
    top: -40px !important;
    /* Offset for container padding */
    z-index: 10;
}

/* Enable hover effects even during editing */
.editor-container * {
    transition: all 0.2s ease-in-out;
}

.editor-container *:hover {
    cursor: text;
}

/* Fidelity: Ensure shadows are visible */
.editor-container .w3-card,
.editor-container .w3-card-2,
.editor-container .w3-card-4 {
    display: block;
    margin-bottom: 16px;
}

/* Fix for W3.CSS Hover effects on images and buttons */
.editor-container .w3-hover-opacity:hover {
    opacity: 0.6 !important;
}

.editor-container .w3-button:hover {
    transition: background-color 0.3s;
}

/* Lists */
.editor-list-ul,
.editor-list-ol {
    margin: 16px 0;
    padding-left: 32px;
}

.editor-list-ul {
    list-style-type: disc;
}

.editor-list-ol {
    list-style-type: decimal;
}

.editor-listitem {
    margin: 8px 0;
}

/* Nested Lists */
.editor-list-ul .editor-list-ul {
    list-style-type: circle;
    margin: 4px 0;
}

.editor-list-ul .editor-list-ul .editor-list-ul {
    list-style-type: square;
}

.editor-list-ol .editor-list-ol {
    list-style-type: lower-alpha;
    margin: 4px 0;
}

.editor-list-ol .editor-list-ol .editor-list-ol {
    list-style-type: lower-roman;
}

/* Typography - Only apply defaults if NO template typography is detected */
.editor-container:not(.w3-content):not(.w3-container) .editor-h1 {
    font-size: 2.25em;
    font-weight: 700;
    margin: 24px 0 16px;
    color: #1a202c;
    line-height: 1.2;
}

.editor-container:not(.w3-content):not(.w3-container) .editor-h2 {
    font-size: 1.75em;
    font-weight: 700;
    margin: 20px 0 12px;
    color: #2d3748;
    line-height: 1.3;
}

.editor-container:not(.w3-content):not(.w3-container) .editor-h3 {
    font-size: 1.5em;
    font-weight: 600;
    margin: 16px 0 8px;
    color: #4a5568;
}

.editor-container:not(.w3-content):not(.w3-container) .editor-h4 {
    font-size: 1.25em;
    font-weight: 600;
    margin: 12px 0 8px;
    color: #4a5568;
}

.editor-container:not(.w3-content):not(.w3-container) .editor-quote {
    margin: 16px 0;
    padding: 10px 20px;
    border-left: 4px solid #cbd5e0;
    background: #f7fafc;
    color: #4a5568;
    font-style: italic;
    line-height: 1.6;
}

/* Text Formatting */
.editor-text-bold {
    font-weight: bold;
}

.editor-text-italic {
    font-style: italic;
}

.editor-text-underline {
    text-decoration: underline;
}

.editor-text-strikethrough {
    text-decoration: line-through;
}

.editor-text-underlineStrikethrough {
    text-decoration: underline line-through;
}

.editor-text-subscript {
    vertical-align: sub;
    font-size: 0.8em;
}

.editor-text-superscript {
    vertical-align: super;
    font-size: 0.8em;
}

.editor-text-code {
    background-color: #f1f3f5;
    /* Subtle grey */
    padding: 2px 5px;
    /* Slight padding for readability */
    border-radius: 4px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    /* Monospace font stack */
    color: #e83e8c;
    /* Standard code pink */
    font-size: 0.9em;
    border: 1px solid #e9ecef;
    /* Very subtle border */
}

/* Horizontal Rule */
.editor-hr {
    border: none;
    border-top: 1px solid #cbd5e0;
    margin: 24px 0;
    height: 0;
    display: block;
}

.editor-hr.selected {
    outline: 2px solid #0782ed;
}

/* Links */
.editor-link,
.editor-autolink {
    color: #005cc5;
    text-decoration: underline;
}

/* --- MEDIA & EMBEDS (Universal) --- */
.media-wrapper,
.image-wrapper,
.youtube-wrapper {
    display: inline-block;
    position: relative;
    max-width: 100%;
}

.media-wrapper.alignment-center,
.youtube-wrapper.alignment-center,
.image-wrapper.alignment-center {
    display: block;
    margin: 20px auto;
    text-align: center;
}

.media-wrapper.alignment-left,
.youtube-wrapper.alignment-left,
.image-wrapper.alignment-left {
    float: left;
    margin-right: 20px;
    margin-bottom: 10px;
}

.media-wrapper.alignment-right,
.youtube-wrapper.alignment-right,
.image-wrapper.alignment-right {
    float: right;
    margin-left: 20px;
    margin-bottom: 10px;
}

.media-wrapper.alignment-full,
.youtube-wrapper.alignment-full,
.image-wrapper.alignment-full {
    display: block;
    width: 100%;
    margin: 20px 0;
}

.media-wrapper.resizing,
.youtube-wrapper.resizing,
.image-wrapper.resizing {
    outline: 2px solid #005cc5;
    z-index: 10;
}

/* Resizer Handles */
.image-resizer {
    position: absolute;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    pointer-events: none;
    border: 1px solid transparent;
}

.media-wrapper:hover .image-resizer,
.media-wrapper.resizing .image-resizer,
.youtube-wrapper:hover .image-resizer,
.youtube-wrapper.resizing .image-resizer {
    border-color: #005cc5;
}

.resizer-handle {
    position: absolute;
    width: 10px;
    height: 10px;
    background: #005cc5;
    pointer-events: auto;
    display: none;
    z-index: 20;
}

.media-wrapper:hover .resizer-handle,
.media-wrapper.resizing .resizer-handle,
.youtube-wrapper:hover .resizer-handle,
.youtube-wrapper.resizing .resizer-handle,
.image-wrapper:hover .resizer-handle,
.image-wrapper.resizing .resizer-handle {
    display: block;
}

.handle-nw {
    top: -5px;
    left: -5px;
    cursor: nw-resize;
}

.handle-ne {
    top: -5px;
    right: -5px;
    cursor: ne-resize;
}

.handle-sw {
    bottom: -5px;
    left: -5px;
    cursor: sw-resize;
}

.handle-se {
    bottom: -5px;
    right: -5px;
    cursor: se-resize;
}

/* Caption */
.image-caption {
    display: block;
    width: 100%;
    text-align: center;
    font-size: 0.9em;
    color: #666;
    margin-top: 8px;
    outline: none;
    min-height: 1.2em;
    border-bottom: 1px dashed transparent;
}

.image-caption:focus {
    border-bottom-color: #ddd;
}